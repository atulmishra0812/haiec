<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HAIEC Compliance Dashboard</title>
    <base href="{{ .Site.BaseURL }}">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="dashboard-header">
        <div class="header-left">
            <img src="{{ "HAIEC_logo.png" | absURL }}" alt="HAIEC Logo" class="dashboard-logo">
            <h1 class="dashboard-title">HAIEC Compliance Dashboard</h1>
        </div>
        <button id="logout-btn" class="logout-btn" onclick="handleLogout()">Logout</button>
    </div>

    <div class="dashboard-content">
        <div id="complianceGrid" class="compliance-grid">
            <a href="/compliance/nyc" class="compliance-card">
                <h3>NYC HR AI Compliance</h3>
                <p>Local Law 144 for automated employment decision tools</p>
            </a>
            <a href="/compliance/gdpr" class="compliance-card">
                <h3>GDPR</h3>
                <p>EU General Data Protection Regulation</p>
            </a>
            <a href="/compliance/hipaa" class="compliance-card">
                <h3>HIPAA</h3>
                <p>Healthcare Information Privacy</p>
            </a>
            <a href="/compliance/iso" class="compliance-card">
                <h3>ISO-27001</h3>
                <p>Information Security Management</p>
            </a>
            <a href="/compliance/nist" class="compliance-card">
                <h3>NIST</h3>
                <p>Cybersecurity Framework</p>
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Authentication check
        async function checkAuth() {
            const supabaseClient = supabase.createClient(
                'https://pwdraluwvlcbyqgivjhu.supabase.co',
                'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB3ZHJhbHV3dmxjYnlxZ2l2amh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5MTQwNTcsImV4cCI6MjA2NDQ5MDA1N30.r7f_sgAzisMvIHHsOcw4ezkNWDoEatCS3cmR5tyib98'
            );
            const { data: { user }, error } = await supabaseClient.auth.getUser();
            if (!user) window.location.href = "/login/";
        }

        // Logout handler
        async function handleLogout() {
            await supabaseClient.auth.signOut();
            window.location.href = "/login/";
        }

        document.addEventListener('DOMContentLoaded', checkAuth);
    </script>
</body>
</html>